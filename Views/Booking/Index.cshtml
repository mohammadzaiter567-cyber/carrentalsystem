@model IEnumerable<projectadvanced.Models.Booking>
@{
    ViewData["Title"] = "All Bookings";
}

<div class="page-header">
    <h1><i class="bi bi-calendar-check me-3"></i>All Bookings</h1>
    <p class="mb-0">Manage all customer bookings</p>
</div>

@if (!Model.Any())
{
    <div class="card">
        <div class="card-body text-center py-5">
            <i class="bi bi-calendar-x display-1 text-muted mb-3"></i>
            <h3>No Bookings Yet</h3>
            <p class="text-muted">There are no bookings in the system.</p>
        </div>
    </div>
}
else
{
    <div class="card">
        <div class="card-body p-0">
            <div class="table-responsive">
                <table class="table table-hover mb-0">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Customer</th>
                            <th>Car</th>
                            <th>Dates</th>
                            <th>Duration</th>
                            <th>Total</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var booking in Model.OrderByDescending(b => b.Id))
                        {
                            var days = (booking.EndDate - booking.StartDate).Days;
                            <tr>
                                <td><strong>#@booking.Id</strong></td>
                                <td>@booking.User?.Email</td>
                                <td>@booking.Car?.Brand @booking.Car?.Model</td>
                                <td>
                                    <small>
                                        @booking.StartDate.ToString("MMM dd") - @booking.EndDate.ToString("MMM dd, yyyy")
                                    </small>
                                </td>
                                <td>@days day(s)</td>
                                <td><strong class="text-accent">$@booking.TotalPrice.ToString("F2")</strong></td>
                                <td>
                                    @if (booking.Status == "Confirmed")
                                    {
                                        <span class="badge bg-success">Confirmed</span>
                                    }
                                    else if (booking.Status == "Pending")
                                    {
                                        <span class="badge bg-warning">Pending</span>
                                    }
                                    else
                                    {
                                        <span class="badge bg-secondary">@booking.Status</span>
                                    }
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
}

